(this["webpackJsonpneko-card-react-ts-project"]=this["webpackJsonpneko-card-react-ts-project"]||[]).push([[0],{15:function(e,r,t){e.exports={neon:"Login_neon__2oOc0",loginPage:"Login_loginPage__3QmJr",loginFormContainer:"Login_loginFormContainer__1OO4x",errorField:"Login_errorField__2fokP",items:"Login_items__xfe4x",text1:"Login_text1__2MhTi",text:"Login_text__3qblI"}},18:function(e,r,t){e.exports={menu:"Menu_menu__2yOrF",menuActive:"Menu_menuActive__1fkJz",link:"Menu_link__wtBYG",activeLink:"Menu_activeLink__3jOIJ"}},19:function(e,r,t){e.exports={neon:"Input_neon__2TJ1R",inputBody:"Input_inputBody__2u4Qd",error:"Input_error__hy98E",shake:"Input_shake__tmaUI"}},24:function(e,r,t){e.exports={neon:"Restore_neon__2xnCX",restorePage:"Restore_restorePage__Yt06I",loginBlock:"Restore_loginBlock__KEPf9",restoreBlock:"Restore_restoreBlock__j8go8"}},37:function(e,r,t){e.exports={neon:"Button_neon__17sQT",button:"Button_button__2OrEq",loginButtonBody:"Button_loginButtonBody__3X43V",link:"Button_link__w9gha","btn-anim-1":"Button_btn-anim-1__2KaU3","btn-anim-2":"Button_btn-anim-2__29h2Y","btn-anim-3":"Button_btn-anim-3__2WLod","btn-anim-4":"Button_btn-anim-4__kwUi5"}},43:function(e,r,t){e.exports={neon:"Profile_neon__2N-I0",profilePage:"Profile_profilePage__1-AUr",profileContainer:"Profile_profileContainer__1bZij"}},44:function(e,r,t){e.exports={neon:"Register_neon__3snfG",registerPage:"Register_registerPage__22eL8",registerBox:"Register_registerBox__byB-h"}},57:function(e,r,t){e.exports={neon:"Checkbox_neon__1DTaF"}},61:function(e,r,t){e.exports={neon:"NotFound_neon__k5F0a",notFoundPage:"NotFound_notFoundPage__3y1lY"}},62:function(e,r,t){e.exports=t(99)},67:function(e,r,t){},89:function(e,r,t){},99:function(e,r,t){"use strict";t.r(r);var a=t(0),n=t.n(a),o=t(34),l=t.n(o);t(67),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=t(7),i=t(30),c={},u=t(4),m=t.n(u),d=t(17),E=t(2),p=t(27),g=t.n(p),_=g.a.create({baseURL:"http://localhost:7542/2.0/"}),b=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _.post("/auth/login",{email:e,password:r,rememberMe:t})},f={_id:"",email:"",name:"",rememberMe:!1,error:"",verified:!1,publicCardPacksCount:0,isAdmin:!1,created:"",updated:"",isFetching:!1},v=function(e){return{type:"login/SET_USER",user:e}},h=function(e){return{type:"login/SET_ERROR",error:e}},R=function(e){return{type:"login/SET_FETCHING",isFetch:e}},w=function(e){return{type:"login/SET_ERROR_IN_PASS",errorIn:e}},O=g.a.create({withCredentials:!0,baseURL:"http://localhost:7542/2.0/"}),S=function(e){return O.post("auth/register/",e).then((function(e){return e}))},N={data:{email:"",password:""},errorMessage:"",registerFetching:!1},k=function(e){return{type:"REGISTER/SET-ERROR-MESSAGE-TYPE",message:e}},T=function(e){return{type:"REGISTER/TOGGLE-REGISTER-FETCHING",registerFetching:e}},j={responseLoading:!1,error:null,success:!1},y=function(e){return{type:"RESTORE/SET_ERROR",error:e}},F=function(e){return{type:"RESTORE/SET_RESPONSE_LOADING",value:e}},P=function(e){return{type:"RESTORE/SET_SUCCESS_REQUEST",success:e}},C=g.a.create({withCredentials:!0,baseURL:"http://localhost:7542/2.0/"}),I={restore:function(e){var r=e.email;return C.post("auth/forgot",{email:r,message:"<div style=\"background-color: lime; padding: 15px\">\n                          password recovery link: \n                          <a href='http://localhost:3000/neko-card-react-ts-project#/changePassword/$token$'>link</a>\n                      </div> "})},changePassword:function(e){var r=window.location.href.split("/")[5],t=e.password;return C.post("auth/set-new-password",{password:t,passwordToken:r})}},x={},B=t(56),L=Object(i.c)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return e},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"login/SET_USER":return Object(E.a)({},r.user);case"login/SET_ERROR":return Object(E.a)(Object(E.a)({},e),{},{error:r.error});case"login/SET_FETCHING":return Object(E.a)(Object(E.a)({},e),{},{isFetching:r.isFetch});case"login/SET_ERROR_IN_PASS":return Object(E.a)(Object(E.a)({},e),{},{errorIn:r.errorIn});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"REGISTER/SET-REGISTER-DATA":return Object(E.a)(Object(E.a)(Object(E.a)({},e),e.data),{},{data:r.data});case"REGISTER/SET-ERROR-MESSAGE-TYPE":return Object(E.a)(Object(E.a)({},e),{},{errorMessage:r.message});case"REGISTER/TOGGLE-REGISTER-FETCHING":return Object(E.a)(Object(E.a)({},e),{},{registerFetching:r.registerFetching});default:return e}},restore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"RESTORE/SET_RESPONSE_LOADING":return Object(E.a)(Object(E.a)({},e),{},{isLoading:r.value});case"RESTORE/SET_ERROR":return Object(E.a)(Object(E.a)({},e),{},{error:r.error});case"RESTORE/SET_SUCCESS_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{error:r.success});default:return e}},changePassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;return e}}),G=Object(i.d)(L,Object(i.a)(B.a)),M=G;window.store=G;t(89);var A=t(12),U=t(3),q=t(15),D=t.n(q),J=t(37),Y=t.n(J),Q=function(e){return n.a.createElement("div",{className:Y.a.loginButtonBody},n.a.createElement("span",{className:Y.a.link},n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("button",{onClick:e.onClick,disabled:e.disable,className:Y.a.button},e.title)))},H=t(19),V=t.n(H),W=function(e){return n.a.createElement("div",{className:e.error?V.a.error:V.a.inputBody},n.a.createElement("input",{value:e.value,type:e.type,onChange:e.onChange,ref:e.register,name:e.name,disabled:e.disable}),e.value?"":n.a.createElement("label",null,e.label))},$=t(57),K=t.n($),X=function(e){return n.a.createElement("div",null,n.a.createElement("input",{checked:e.checked,onChange:e.onChange,className:K.a.checkbox,type:"checkbox",name:e.name,ref:e.register,disabled:e.disable}))},z=t(13),Z=t(8),ee=t(23),re=Z.a().shape({login:Z.b().required().email(),password:Z.b().required().min(7)}),te=function(e){var r=Object(z.useForm)({resolver:Object(ee.yupResolver)(re)}),t=r.register,a=r.handleSubmit,o=r.errors,l=Object(s.b)(),i=Object(s.c)((function(e){return e.login})),c=Object(s.c)((function(e){return e.login.isFetching}));return n.a.createElement("div",{className:e.className},n.a.createElement("form",{onSubmit:a((function(e){var r,t,a;l((r=e.login,t=e.password,a=e.rememberMe,function(){var e=Object(d.a)(m.a.mark((function e(n){var o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(R(!0)),e.next=4,b(r,t,a);case 4:o=e.sent,n(v(o.data)),console.log(o),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response?(console.log("ERROR: ",e.t0.response.data.error),e.t0.response.data.password?n(w("password")):e.t0.response.data.email&&n(w("email")),n(h(e.t0.response.data.error))):console.log("ERROR: ",e.t0.message+", more details in the console");case 13:n(R(!1));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(r){return e.apply(this,arguments)}}()))}))},n.a.createElement(W,{label:"Login",error:i.error,name:"login",register:t,disable:c}),o.login&&n.a.createElement("span",{className:D.a.errorField},o.login.message),"email"===i.errorIn&&n.a.createElement("span",{className:D.a.errorField},i.error),n.a.createElement(W,{type:"password",label:"Password",error:i.error,name:"password",register:t,disable:c}),o.password&&n.a.createElement("span",{className:D.a.errorField},o.password.message),"password"===i.errorIn&&n.a.createElement("span",{className:D.a.errorField},i.error),n.a.createElement(X,{name:"rememberMe",register:t,disable:c}),n.a.createElement(Q,{title:"login",disable:c})))},ae=function(e){return n.a.createElement("div",{className:D.a.loginPage},n.a.createElement("div",{className:D.a.loginFormContainer},n.a.createElement("h1",null," LOGIN "),n.a.createElement(te,{className:D.a.loginFormContainer}),n.a.createElement("div",{className:D.a.items},n.a.createElement(A.b,{className:D.a.text1,to:"/restore"},"Forgot your password?"),n.a.createElement(A.b,{className:D.a.text,to:"/register"},"Register"))))},ne=t(24),oe=t.n(ne),le=Z.a().shape({email:Z.b().required().email()}),se=function(e){var r,t,a=Object(s.b)(),o=Object(s.c)((function(e){return e.restore})),l=Object(z.useForm)({resolver:Object(ee.yupResolver)(le)}),i=l.control,c=l.handleSubmit,u=l.errors;return o.responseLoading?n.a.createElement("h1",null,"Loading..."):n.a.createElement("div",{className:oe.a.restorePage},n.a.createElement("div",null,n.a.createElement(te,{className:oe.a.loginBlock})),n.a.createElement("div",{className:oe.a.restoreBlock},n.a.createElement("h1",null,"Forgot you password?"),o.success?n.a.createElement("h2",null,"Link on email"):n.a.createElement("form",{onSubmit:c((function(e){a(function(e){return function(r){r(F(!0)),r(P(!1)),I.restore(e).then((function(e){200===e.status&&(r(F(!1)),r(y(null)),r(P(!0)))})).catch((function(e){r(F(!1)),r(y(e.response.data.error))})),r(F(!1))}}(e))}))},n.a.createElement(z.Controller,{as:n.a.createElement(W,{onChange:function(){var e;return null===(null===(e=u.email)||void 0===e?void 0:e.message)},error:(null===(r=u.email)||void 0===r?void 0:r.message)||o.error,label:"Enter your login"}),name:"email",control:i,defaultValue:""}),(null===(t=u.email)||void 0===t?void 0:t.message)||o.error,n.a.createElement(Q,{disable:o.responseLoading,title:"SEND"}))))},ie=t(43),ce=t.n(ie),ue=function(e){return n.a.createElement("div",{className:ce.a.profilePage},n.a.createElement("div",{className:ce.a.profileContainer},n.a.createElement("h1",null,"profile")))},me=t(61),de=t.n(me),Ee=function(e){return n.a.createElement("div",{className:de.a.notFoundPage},n.a.createElement("h1",null,"404"),n.a.createElement("div",null,n.a.createElement("h1",null,"not found"),n.a.createElement("div",null,"\u0442\u0435\u0441\u0442")))},pe=t(20),ge=t(18),_e=t.n(ge),be=function(){var e=Object(a.useState)(!1),r=Object(pe.a)(e,2),t=r[0],o=r[1];return n.a.createElement("div",{className:_e.a.menu},t?n.a.createElement("button",{onClick:function(){o(!1)}},"menu"):n.a.createElement("div",{className:_e.a.menuActive},n.a.createElement("button",{onClick:function(){o(!0)}},"menu"),n.a.createElement(A.b,{to:"/restore",className:_e.a.link,activeClassName:_e.a.activeLink},"Forgot password"),n.a.createElement(A.b,{to:"/register",className:_e.a.link,activeClassName:_e.a.activeLink},"Register"),n.a.createElement(A.b,{to:"/login",className:_e.a.link,activeClassName:_e.a.activeLink},"Login"),n.a.createElement(A.b,{to:"/profile",className:_e.a.link,activeClassName:_e.a.activeLink},"Profile")))},fe=Z.a().shape({password:Z.b().required().min(7)}),ve=function(e){var r,t,a=Object(s.c)((function(e){return e.restore})),o=Object(s.b)(),l=Object(z.useForm)({resolver:Object(ee.yupResolver)(fe)}),i=l.control,c=l.handleSubmit,u=l.errors;return a.success?n.a.createElement(U.a,{to:"/login"}):n.a.createElement("div",{className:oe.a.restorePage},n.a.createElement("div",null,n.a.createElement(te,{className:oe.a.loginBlock})),n.a.createElement("div",{className:oe.a.restoreBlock},n.a.createElement("h1",null,"Please, set your new Password"),n.a.createElement("form",{onSubmit:c((function(e){var r;e.password===e.repeat_password?o((r=e,function(e){e(F(!0)),e(P(!1)),I.changePassword(r).then((function(r){200===r.status&&(e(F(!1)),e(P(!0)))})).catch((function(r){e(F(!1)),e(y(r.response.data.error))}))})):o(y("Password must be identical "))}))},n.a.createElement(z.Controller,{as:n.a.createElement(W,{error:a.error,label:"password"}),name:"password",control:i,defaultValue:""}),n.a.createElement(z.Controller,{as:n.a.createElement(W,{error:(null===(r=u.password)||void 0===r?void 0:r.message)||a.error,label:"repeat password"}),name:"repeat_password",control:i,defaultValue:""}),(null===(t=u.password)||void 0===t?void 0:t.message)||a.error,n.a.createElement(Q,{disable:a.responseLoading,title:"SEND"}))))},he=t(44),Re=t.n(he),we=function(e,r){var t=e.label,a=e.register,o=e.required,l=e.placeholder,s=e.type;return n.a.createElement("div",{className:r.error?V.a.error:V.a.inputBody},n.a.createElement("input",{name:t,ref:a({required:o}),placeholder:l,type:s}))},Oe=Z.a().shape({password:Z.b().required().min(7),email:Z.b().required().email(),confirm_password:Z.b().required().min(7)}),Se=n.a.memo((function(){var e,r,t,a=Object(s.b)(),o=Object(s.c)((function(e){return e.register})),l=Object(z.useForm)({resolver:Object(ee.yupResolver)(Oe)}),i=l.register,c=l.handleSubmit,u=l.errors,m=l.reset;return n.a.createElement(n.a.Fragment,null,o.data.email.length>0&&n.a.createElement(U.a,{to:"/login"}),n.a.createElement("div",{className:Re.a.registerPage,onBlur:function(){a(k(""))}},n.a.createElement("div",{className:Re.a.registerBox},n.a.createElement("h1",null,"REGISTER"),o.errorMessage?n.a.createElement("div",null,o.errorMessage):null,n.a.createElement("form",{onSubmit:c((function(e){if(e.confirm_password===e.password){var r={email:e.email,password:e.password};a(function(e){return function(r){r(T(!0)),S(e).then((function(e){e.data.error||r(function(e){return{type:"REGISTER/SET-REGISTER-DATA",data:e}}(e.data.addedUser)),r(k(e.data.error))})).catch((function(e){r(k(e.response.data.error))})),r(T(!1))}}(r)),console.log(r),m()}else a(k("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"))}))},n.a.createElement("div",{className:o.errorMessage||u.email?V.a.error:""},n.a.createElement(we,{register:i,label:"email",type:"text",placeholder:"email"}),null===(e=u.email)||void 0===e?void 0:e.message),n.a.createElement("div",{className:o.errorMessage||u.password?V.a.error:""},n.a.createElement(we,{register:i,label:"password",type:"password",placeholder:"password"}),null===(r=u.password)||void 0===r?void 0:r.message),n.a.createElement("div",{className:o.errorMessage||u.password?V.a.error:""},n.a.createElement(we,{register:i,label:"confirm_password",type:"password",placeholder:"confirm password"}),null===(t=u.confirm_password)||void 0===t?void 0:t.message),n.a.createElement(Q,{title:"SEND",disable:o.registerFetching})))))})),Ne=function(){return n.a.createElement(A.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(be,null),n.a.createElement(U.d,null,n.a.createElement(U.b,{path:"/restore",render:function(){return n.a.createElement(se,null)}}),n.a.createElement(U.b,{exact:!0,path:"/register",render:function(){return n.a.createElement(Se,null)}}),n.a.createElement(U.b,{exact:!0,path:["/login","/"],render:function(){return n.a.createElement(ae,null)}}),n.a.createElement(U.b,{exact:!0,path:"/profile",render:function(){return n.a.createElement(ue,null)}}),n.a.createElement(U.b,{path:"/changePassword",render:function(){return n.a.createElement(ve,null)}}),n.a.createElement(U.b,{render:function(){return n.a.createElement(Ee,null)}}))))};l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(s.a,{store:M},n.a.createElement(Ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[62,1,2]]]);
//# sourceMappingURL=main.ea1f5dfd.chunk.js.map