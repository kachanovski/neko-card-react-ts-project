(this["webpackJsonpneko-card-react-ts-project"]=this["webpackJsonpneko-card-react-ts-project"]||[]).push([[0],{15:function(e,t,r){e.exports={neon:"Login_neon__2oOc0",loginPage:"Login_loginPage__3QmJr",loginFormContainer:"Login_loginFormContainer__1OO4x",errorField:"Login_errorField__2fokP",items:"Login_items__xfe4x",text1:"Login_text1__2MhTi",text:"Login_text__3qblI"}},18:function(e,t,r){e.exports={menu:"Menu_menu__2yOrF",menuActive:"Menu_menuActive__1fkJz",link:"Menu_link__wtBYG",activeLink:"Menu_activeLink__3jOIJ"}},19:function(e,t,r){e.exports={neon:"Input_neon__2TJ1R",inputBody:"Input_inputBody__2u4Qd",error:"Input_error__hy98E",shake:"Input_shake__tmaUI"}},20:function(e,t,r){e.exports={neon:"Restore_neon__2xnCX",restorePage:"Restore_restorePage__Yt06I",loginBlock:"Restore_loginBlock__KEPf9",restoreBlock:"Restore_restoreBlock__j8go8",errorColor:"Restore_errorColor__1bV3O"}},34:function(e,t,r){e.exports={neon:"Button_neon__17sQT",button:"Button_button__2OrEq",loginButtonBody:"Button_loginButtonBody__3X43V",link:"Button_link__w9gha","btn-anim-1":"Button_btn-anim-1__2KaU3","btn-anim-2":"Button_btn-anim-2__29h2Y","btn-anim-3":"Button_btn-anim-3__2WLod","btn-anim-4":"Button_btn-anim-4__kwUi5"}},40:function(e,t,r){e.exports={neon:"Profile_neon__2N-I0",profilePage:"Profile_profilePage__1-AUr",profileContainer:"Profile_profileContainer__1bZij"}},41:function(e,t,r){e.exports={neon:"Register_neon__3snfG",registerPage:"Register_registerPage__22eL8",registerBox:"Register_registerBox__byB-h"}},42:function(e,t,r){e.exports={neon:"Preloader_neon__3Tzof",cssload_container:"Preloader_cssload_container__c-n8B",cssload_speeding_wheel:"Preloader_cssload_speeding_wheel__1wLSN","cssload-spin":"Preloader_cssload-spin__2PCcK"}},55:function(e,t,r){e.exports={neon:"Checkbox_neon__1DTaF"}},59:function(e,t,r){e.exports={neon:"NotFound_neon__k5F0a",notFoundPage:"NotFound_notFoundPage__3y1lY"}},61:function(e,t,r){e.exports=r(98)},66:function(e,t,r){},88:function(e,t,r){},98:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(31),l=r.n(o);r(66),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=r(6),c=r(28),i=r(2),u=r(22),m=r.n(u),d=m.a.create({withCredentials:!0,baseURL:"http://localhost:7542/2.0/"}),E=function(e){return d.post("auth/me",e).then((function(e){return e.data}))},g=r(4),p=r.n(g),_=r(17),b=m.a.create({baseURL:"http://localhost:7542/2.0/"}),f=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return b.post("/auth/login",{email:e,password:t,rememberMe:r})},v={_id:"",email:"",name:"",rememberMe:!1,error:"",verified:!1,publicCardPacksCount:0,isAdmin:!1,created:"",updated:"",isFetching:!1},h=function(e){return{type:"login/SET_USER",user:e}},R=function(e){return{type:"login/SET_ERROR",error:e}},O=function(e){return{type:"login/SET_FETCHING",isFetch:e}},w=function(e){return{type:"login/SET_ERROR_IN_PASS",errorIn:e}},S=m.a.create({withCredentials:!0,baseURL:"http://localhost:7542/2.0/"}),N=function(e){return S.post("auth/register/",e).then((function(e){return e}))},T={data:{email:"",id:""},errorMessage:"",registerFetching:!1},j=function(e){return{type:"REGISTER/SET-ERROR-MESSAGE-TYPE",message:e}},k=function(e){return{type:"REGISTER/TOGGLE-REGISTER-FETCHING",registerFetching:e}},y={loading:!1,error:null,success:!1,disableButton:!1},F=function(e){return{type:"RESTORE/SET_ERROR",error:e}},P=function(e){return{type:"RESTORE/SET_LOADING",loading:e}},C=function(e){return{type:"RESTORE/SET_BUTTON_DISABLE",disable:e}},B=function(e){return{type:"RESTORE/SET_SUCCESS_REQUEST",success:e}},I=m.a.create({withCredentials:!0,baseURL:"http://localhost:7542/2.0/"}),x={restore:function(e){var t=e.email;return I.post("auth/forgot",{email:t,message:"<div style=\"background-color: lime; padding: 15px\">\n                          password recovery link: \n                          <a href='http://localhost:3000/neko-card-react-ts-project#/changePassword/$token$'>link</a>\n                      </div> "})},changePassword:function(e){var t=window.location.href.split("/")[5],r=e.password;return I.post("auth/set-new-password",{password:r,passwordToken:t})}},L={},G=r(54),A=Object(c.c)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE/SET-PROFILE-USER-DATA":return Object(i.a)({},t.data);default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET_USER":return Object(i.a)({},t.user);case"login/SET_ERROR":return Object(i.a)(Object(i.a)({},e),{},{error:t.error});case"login/SET_FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetch});case"login/SET_ERROR_IN_PASS":return Object(i.a)(Object(i.a)({},e),{},{errorIn:t.errorIn});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER/SET-REGISTER-DATA":return Object(i.a)(Object(i.a)(Object(i.a)({},e),e.data),{},{data:t.data});case"REGISTER/SET-ERROR-MESSAGE-TYPE":return Object(i.a)(Object(i.a)({},e),{},{errorMessage:t.message});case"REGISTER/TOGGLE-REGISTER-FETCHING":return Object(i.a)(Object(i.a)({},e),{},{registerFetching:t.registerFetching});default:return e}},restore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESTORE/SET_LOADING":return Object(i.a)(Object(i.a)({},e),{},{loading:t.loading});case"RESTORE/SET_ERROR":return Object(i.a)(Object(i.a)({},e),{},{error:t.error});case"RESTORE/SET_SUCCESS_REQUEST":return Object(i.a)(Object(i.a)({},e),{},{success:t.success});case"RESTORE/SET_BUTTON_DISABLE":return Object(i.a)(Object(i.a)({},e),{},{disableButton:t.disable});default:return e}},changePassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return e}}),M=Object(c.d)(A,Object(c.a)(G.a)),U=M;window.store=M;r(88);var D=r(10),q=r(3),J=r(15),Y=r.n(J),Q=r(34),V=r.n(Q),H=function(e){return n.a.createElement("div",{className:V.a.loginButtonBody},n.a.createElement("span",{className:V.a.link},n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("button",{onClick:e.onClick,disabled:e.disable,className:V.a.button},e.title)))},K=r(19),W=r.n(K),$=function(e){return n.a.createElement("div",{className:e.error?W.a.error:W.a.inputBody},n.a.createElement("input",{value:e.value,type:e.type,onChange:e.onChange,ref:e.register,name:e.name,disabled:e.disable}),e.value?"":n.a.createElement("label",null,e.label))},z=r(55),X=r.n(z),Z=function(e){return n.a.createElement("div",null,n.a.createElement("input",{checked:e.checked,onChange:e.onChange,className:X.a.checkbox,type:"checkbox",name:e.name,ref:e.register,disabled:e.disable}))},ee=r(13),te=r(8),re=r(24),ae=te.a().shape({login:te.b().required().email(),password:te.b().required().min(7)}),ne=function(e){var t=Object(ee.useForm)({resolver:Object(re.yupResolver)(ae)}),r=t.register,a=t.handleSubmit,o=t.errors,l=Object(s.b)(),c=Object(s.c)((function(e){return e.login})),i=Object(s.c)((function(e){return e.login.isFetching}));return n.a.createElement("div",{className:e.className},n.a.createElement("form",{onSubmit:a((function(e){var t,r,a;l((t=e.login,r=e.password,a=e.rememberMe,function(){var e=Object(_.a)(p.a.mark((function e(n){var o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(O(!0)),e.next=4,f(t,r,a);case 4:o=e.sent,n(h(o.data)),console.log(o),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response?(console.log("ERROR: ",e.t0.response.data.error),e.t0.response.data.password?n(w("password")):e.t0.response.data.email&&n(w("email")),n(R(e.t0.response.data.error))):console.log("ERROR: ",e.t0.message+", more details in the console");case 13:n(O(!1));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))}))},n.a.createElement($,{label:"Login",error:c.error,name:"login",register:r,disable:i}),o.login&&n.a.createElement("span",{className:Y.a.errorField},o.login.message),"email"===c.errorIn&&n.a.createElement("span",{className:Y.a.errorField},c.error),n.a.createElement($,{type:"password",label:"Password",error:c.error,name:"password",register:r,disable:i}),o.password&&n.a.createElement("span",{className:Y.a.errorField},o.password.message),"password"===c.errorIn&&n.a.createElement("span",{className:Y.a.errorField},c.error),n.a.createElement(Z,{name:"rememberMe",register:r,disable:i}),n.a.createElement(H,{title:"login",disable:i})))},oe=function(e){return n.a.createElement("div",{className:Y.a.loginPage},n.a.createElement("div",{className:Y.a.loginFormContainer},n.a.createElement("h1",null," LOGIN "),n.a.createElement(ne,{className:Y.a.loginFormContainer}),n.a.createElement("div",{className:Y.a.items},n.a.createElement(D.b,{className:Y.a.text1,to:"/restore"},"Forgot your password?"),n.a.createElement(D.b,{className:Y.a.text,to:"/register"},"Register"))))},le=r(20),se=r.n(le),ce=te.a().shape({email:te.b().required().email()}),ie=function(e){var t,r,a=Object(s.b)(),o=Object(s.c)((function(e){return e.restore})),l=Object(ee.useForm)({resolver:Object(re.yupResolver)(ce)}),c=l.control,i=l.handleSubmit,u=l.errors;return n.a.createElement("div",{className:se.a.restorePage},n.a.createElement("div",null,n.a.createElement(ne,{className:se.a.loginBlock})),n.a.createElement("div",{className:se.a.restoreBlock},n.a.createElement("h1",null,"Forgot you password?"),o.success?n.a.createElement("h2",null,"Link on email"):n.a.createElement("form",{onSubmit:i((function(e){a(function(e){return function(t){t(P(!0)),t(B(!1)),t(C(!0)),x.restore(e).then((function(e){200===e.status&&(t(P(!1)),t(F(null)),t(B(!0)),t(C(!1)))})).catch((function(e){t(P(!1)),t(C(!1)),t(F(e.response.data.error))}))}}(e))}))},n.a.createElement(ee.Controller,{as:n.a.createElement($,{onChange:function(){var e;return null===(null===(e=u.email)||void 0===e?void 0:e.message)},error:(null===(t=u.email)||void 0===t?void 0:t.message)||o.error,label:"Enter your login"}),name:"email",control:c,defaultValue:""}),n.a.createElement("div",{className:se.a.errorColor},(null===(r=u.email)||void 0===r?void 0:r.message)||o.error),n.a.createElement(H,{disable:o.loading,title:"SEND"}))))},ue=r(40),me=r.n(ue),de=function(e){var t=Object(s.c)((function(e){return e.profile})),r=Object(s.b)();return Object(a.useEffect)((function(){r((function(e){E({}).then((function(t){(null===t||void 0===t?void 0:t.error)&&e({type:"PROFILE/SET-PROFILE-USER-DATA",data:t})}))}))}),[]),n.a.createElement(n.a.Fragment,null,t?null:n.a.createElement(q.a,{to:"/login"}),n.a.createElement("div",{className:me.a.profilePage},n.a.createElement("div",{className:me.a.profileContainer},n.a.createElement("h1",null,"profile"))))},Ee=r(59),ge=r.n(Ee),pe=function(e){return n.a.createElement("div",{className:ge.a.notFoundPage},n.a.createElement("h1",null,"404"),n.a.createElement("div",null,n.a.createElement("h1",null,"not found"),n.a.createElement("div",null,"\u0442\u0435\u0441\u0442")))},_e=r(60),be=r(18),fe=r.n(be),ve=function(){var e=Object(a.useState)(!1),t=Object(_e.a)(e,2),r=t[0],o=t[1];return n.a.createElement("div",{className:fe.a.menu},r?n.a.createElement("button",{onClick:function(){o(!1)}},"menu"):n.a.createElement("div",{className:fe.a.menuActive},n.a.createElement("button",{onClick:function(){o(!0)}},"menu"),n.a.createElement(D.b,{to:"/restore",className:fe.a.link,activeClassName:fe.a.activeLink},"Forgot password"),n.a.createElement(D.b,{to:"/register",className:fe.a.link,activeClassName:fe.a.activeLink},"Register"),n.a.createElement(D.b,{to:"/login",className:fe.a.link,activeClassName:fe.a.activeLink},"Login"),n.a.createElement(D.b,{to:"/profile",className:fe.a.link,activeClassName:fe.a.activeLink},"Profile")))},he=te.a().shape({password:te.b().required().min(7)}),Re=function(e){var t,r,a=Object(s.c)((function(e){return e.restore})),o=Object(s.b)(),l=Object(ee.useForm)({resolver:Object(re.yupResolver)(he)}),c=l.control,i=l.handleSubmit,u=l.errors;return a.success?n.a.createElement(q.a,{to:"/login"}):n.a.createElement("div",{className:se.a.restorePage},n.a.createElement("div",null,n.a.createElement(ne,{className:se.a.loginBlock})),n.a.createElement("div",{className:se.a.restoreBlock},n.a.createElement("h1",null,"Please, set your new Password"),n.a.createElement("form",{onSubmit:i((function(e){var t;e.password===e.repeat_password?o((t=e,function(e){e(P(!0)),e(B(!1)),e(C(!0)),x.changePassword(t).then((function(t){200===t.status&&(e(P(!1)),F(null),e(C(!1)),e(B(!0)))})).catch((function(t){e(P(!1)),e(C(!1)),e(F(t.response.data.error))}))})):o(F("Password must be identical "))}))},n.a.createElement(ee.Controller,{as:n.a.createElement($,{error:a.error,label:"password"}),name:"password",control:c,defaultValue:""}),n.a.createElement(ee.Controller,{as:n.a.createElement($,{error:(null===(t=u.password)||void 0===t?void 0:t.message)||a.error,label:"repeat password"}),name:"repeat_password",control:c,defaultValue:""}),n.a.createElement("div",{className:se.a.errorColor},(null===(r=u.password)||void 0===r?void 0:r.message)||a.error),n.a.createElement(H,{disable:a.loading,title:"SEND"}))))},Oe=r(41),we=r.n(Oe),Se=function(e,t){var r=e.label,a=e.register,o=e.required,l=e.placeholder,s=e.type;return n.a.createElement("div",{className:t.error?W.a.error:W.a.inputBody},n.a.createElement("input",{name:r,ref:a({required:o}),placeholder:l,type:s}))},Ne=te.a().shape({password:te.b().required().min(7),email:te.b().required().email(),confirm_password:te.b().required().min(7)}),Te=n.a.memo((function(){var e,t,r,a=Object(s.b)(),o=Object(s.c)((function(e){return e.register})),l=Object(ee.useForm)({resolver:Object(re.yupResolver)(Ne)}),c=l.register,i=l.handleSubmit,u=l.errors,m=l.reset;l.setError;return n.a.createElement(n.a.Fragment,null,o.data.email.length>0&&n.a.createElement(q.a,{to:"/login"}),n.a.createElement("div",{className:we.a.registerPage,onBlur:function(){a(j(""))}},n.a.createElement("div",{className:we.a.registerBox},n.a.createElement("h1",null,"REGISTER"),o.errorMessage?n.a.createElement("div",null,o.errorMessage):null,n.a.createElement("form",{onSubmit:i((function(e){if(e.confirm_password===e.password){var t={email:e.email,password:e.password};a(function(e){return function(t){t(k(!0)),N(e).then((function(e){e.data.error||t(function(e){return{type:"REGISTER/SET-REGISTER-DATA",data:e}}(e.data.addedUser)),t(j(e.data.error))})).catch((function(e){t(j(e.message))})),t(k(!1))}}(t)),console.log(t),m()}else a(j("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"))}))},n.a.createElement("div",{className:o.errorMessage||u.email?W.a.error:""},n.a.createElement(Se,{register:c,label:"email",type:"text",placeholder:"email"}),null===(e=u.email)||void 0===e?void 0:e.message),n.a.createElement("div",{className:o.errorMessage||u.password?W.a.error:""},n.a.createElement(Se,{register:c,label:"password",type:"password",placeholder:"password"}),null===(t=u.password)||void 0===t?void 0:t.message),n.a.createElement("div",{className:o.errorMessage||u.password?W.a.error:""},n.a.createElement(Se,{register:c,label:"confirm_password",type:"password",placeholder:"confirm password"}),null===(r=u.confirm_password)||void 0===r?void 0:r.message),n.a.createElement(H,{title:"SEND",disable:o.registerFetching})))))})),je=r(42),ke=r.n(je),ye=function(e){return n.a.createElement("div",{className:ke.a.cssload_container},n.a.createElement("div",{className:ke.a.cssload_speeding_wheel}))},Fe=function(){var e=Object(s.c)((function(e){return e.restore.loading}));return n.a.createElement(D.a,null,n.a.createElement("div",{className:"App"},e&&n.a.createElement(ye,null),n.a.createElement(ve,null),n.a.createElement(q.d,null,n.a.createElement(q.b,{path:"/restore",render:function(){return n.a.createElement(ie,null)}}),n.a.createElement(q.b,{exact:!0,path:"/register",render:function(){return n.a.createElement(Te,null)}}),n.a.createElement(q.b,{exact:!0,path:["/login","/"],render:function(){return n.a.createElement(oe,null)}}),n.a.createElement(q.b,{exact:!0,path:"/profile",render:function(){return n.a.createElement(de,null)}}),n.a.createElement(q.b,{path:"/changePassword",render:function(){return n.a.createElement(Re,null)}}),n.a.createElement(q.b,{render:function(){return n.a.createElement(pe,null)}}))))};l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(s.a,{store:U},n.a.createElement(Fe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[61,1,2]]]);
//# sourceMappingURL=main.555daf99.chunk.js.map