(this["webpackJsonpneko-card-react-ts-project"]=this["webpackJsonpneko-card-react-ts-project"]||[]).push([[0],{16:function(e,t,n){e.exports={menu:"Menu_menu__2yOrF",menuActive:"Menu_menuActive__1fkJz",link:"Menu_link__wtBYG",activeLink:"Menu_activeLink__3jOIJ"}},18:function(e,t,n){e.exports={neon:"Restore_neon__2xnCX",restorePage:"Restore_restorePage__Yt06I",loginBlock:"Restore_loginBlock__KEPf9",restoreBlock:"Restore_restoreBlock__j8go8"}},23:function(e,t,n){e.exports={neon:"Login_neon__2oOc0",loginPage:"Login_loginPage__3QmJr",loginFormContainer:"Login_loginFormContainer__1OO4x",items:"Login_items__xfe4x",text1:"Login_text1__2MhTi",text:"Login_text__3qblI"}},30:function(e,t,n){e.exports={neon:"Input_neon__2TJ1R",inputBody:"Input_inputBody__2u4Qd",error:"Input_error__hy98E",shake:"Input_shake__tmaUI"}},31:function(e,t,n){e.exports={neon:"Register_neon__3snfG",registerPage:"Register_registerPage__22eL8",registerBox:"Register_registerBox__byB-h"}},36:function(e,t,n){e.exports={neon:"Button_neon__17sQT",button:"Button_button__2OrEq",loginButtonBody:"Button_loginButtonBody__3X43V",link:"Button_link__w9gha","btn-anim-1":"Button_btn-anim-1__2KaU3","btn-anim-2":"Button_btn-anim-2__29h2Y","btn-anim-3":"Button_btn-anim-3__2WLod","btn-anim-4":"Button_btn-anim-4__kwUi5"}},43:function(e,t,n){e.exports={neon:"Profile_neon__2N-I0",profilePage:"Profile_profilePage__1-AUr",profileContainer:"Profile_profileContainer__1bZij"}},56:function(e,t,n){e.exports={neon:"Checkbox_neon__1DTaF"}},57:function(e,t,n){e.exports={neon:"NotFound_neon__k5F0a",notFoundPage:"NotFound_notFoundPage__3y1lY"}},62:function(e,t,n){e.exports=n(99)},67:function(e,t,n){},89:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(33),l=n.n(o);n(67),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(6),i=n(27),s={},u=n(3),m=n.n(u),d=n(15),E=n(11),p=n(21),g=n.n(p),_=g.a.create({baseURL:"http://localhost:7542/2.0/"}),f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _.post("/auth/login",{email:e,password:t,rememberMe:n})},b={_id:"",email:"",name:"",rememberMe:!1,error:"",verified:!1,publicCardPacksCount:0,isAdmin:!1,created:"",updated:""},h=function(e){return{type:"login/SET_USER",user:e}},v=function(e){return{type:"login/SET_ERROR",error:e}},k=g.a.create({withCredentials:!0,baseURL:"http://localhost:7542/2.0/"}),O=function(e){return k.post("auth/register/",e).then((function(e){return e.data}))},w={email:"",password:""},N={responseLoading:!1,error:null},R=function(e){return{type:"RESTORE/SET_ERROR",error:e}},j=function(e){return{type:"RESTORE/SET_RESPONSE_LOADING",value:e}},y={restore:function(e){var t=e.email;return g.a.post("https://neko-back.herokuapp.com/2.0/auth/forgot",{email:t,message:"<div style=\"background-color: lime; padding: 15px\">\n                          password recovery link: \n                          <a href='http://localhost:3000/neko-card-react-ts-project#/changePassword/$token$'>link</a>\n                      </div> "})},changePassword:function(e){var t=window.location.href.split("/")[5],n=e.password;return g.a.post("https://neko-back.herokuapp.com/2.0/auth/set-new-password",{password:n,resetPasswordToken:t})}},S={},x=n(55),B=Object(i.c)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return e},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET_USER":return Object(E.a)({},t.user);case"login/SET_ERROR":return Object(E.a)(Object(E.a)({},e),{},{error:t.error});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-REGISTER-DATA":return Object(E.a)(Object(E.a)({},e),t.data);default:return e}},restore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESTORE/SET_RESPONSE_LOADING":return Object(E.a)(Object(E.a)({},e),{},{isLoading:t.value});case"RESTORE/SET_ERROR":return Object(E.a)(Object(E.a)({},e),{},{error:t.error});default:return e}},changePassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;return e}}),P=Object(i.d)(B,Object(i.a)(x.a)),C=P;window.store=P;n(89);var L=n(14),T=n(2),F=n(23),I=n.n(F),A=n(7),M=n(36),U=n.n(M),D=function(e){return r.a.createElement("div",{className:U.a.loginButtonBody},r.a.createElement("span",{className:U.a.link},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("button",{onClick:e.onClick,disabled:e.disable,className:U.a.button},e.title)))},G=n(30),q=n.n(G),J=function(e){return r.a.createElement("div",{className:e.error?q.a.error:q.a.inputBody},r.a.createElement("input",{value:e.value,type:e.type,onChange:e.onChange}),e.value?"":r.a.createElement("label",null,e.label))},V=n(56),Y=n.n(V),Q=function(e){return r.a.createElement("div",null,r.a.createElement("input",{checked:e.checked,onChange:e.onChange,className:Y.a.checkbox,type:"checkbox"}))},W=function(e){var t=Object(c.b)(),n=Object(c.c)((function(e){return e.login.error})),o=Object(a.useState)(""),l=Object(A.a)(o,2),i=l[0],s=l[1],u=Object(a.useState)(""),E=Object(A.a)(u,2),p=E[0],g=E[1],_=Object(a.useState)(!1),b=Object(A.a)(_,2),k=b[0],O=b[1];return r.a.createElement("div",{className:e.className},r.a.createElement(J,{label:"Login",value:i,onChange:function(e){s(e.currentTarget.value)},error:n}),r.a.createElement(J,{type:"password",label:"Password",value:p,onChange:function(e){g(e.currentTarget.value)},error:n}),r.a.createElement(Q,{checked:k,onChange:function(e){O(e.currentTarget.checked)}}),r.a.createElement(D,{title:"login",onClick:function(){var e,n,a;t((e=i,n=p,a=k,function(){var t=Object(d.a)(m.a.mark((function t(r){var o,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(e,n,a);case 3:o=t.sent,r(h(o.data)),console.log(o),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),l=t.t0.response?t.t0.response.data.error:t.t0.message+", more details in the console",console.log("Error: ",l),r(v(l));case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()))}}))},$=function(e){return r.a.createElement("div",{className:I.a.loginPage},r.a.createElement("div",{className:I.a.loginFormContainer},r.a.createElement("h1",null," LOGIN "),r.a.createElement(W,{className:I.a.loginFormContainer}),r.a.createElement("div",{className:I.a.items},r.a.createElement(L.b,{className:I.a.text1,to:"/restore"},"Forgot your password?"),r.a.createElement(L.b,{className:I.a.text,to:"/register"},"Register"))))},K=n(18),X=n.n(K),z=n(17),Z=function(e){var t=Object(c.b)(),n=Object(z.useForm)(),a=n.control,o=n.handleSubmit,l=Object(c.c)((function(e){return e.restore}));return l.responseLoading?r.a.createElement("h1",null,"Loading..."):r.a.createElement("div",{className:X.a.restorePage},r.a.createElement("div",null,r.a.createElement(W,{className:X.a.loginBlock})),r.a.createElement("div",{className:X.a.restoreBlock},l.error?r.a.createElement("h2",{className:X.a.errorMessage},l.error):r.a.createElement("h1",null,"Forgot you password?"),r.a.createElement("form",{onSubmit:o((function(e){t(function(e){return function(t){t(j(!0)),y.restore(e).then((function(e){200===e.status&&(t(j(!1)),t(R("\u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u043d\u0430 Email")))})).catch((function(e){t(j(!1)),t(R(e.response.data.error))})),t(j(!1))}}(e))}))},r.a.createElement(z.Controller,{as:r.a.createElement(J,{error:l.error,label:"Enter your login"}),name:"email",control:a,defaultValue:""}),r.a.createElement(D,{disable:l.responseLoading,title:"SEND"}))))},H=n(43),ee=n.n(H),te=function(e){return r.a.createElement("div",{className:ee.a.profilePage},r.a.createElement("div",{className:ee.a.profileContainer},r.a.createElement("h1",null,"profile")))},ne=n(57),ae=n.n(ne),re=function(e){return r.a.createElement("div",{className:ae.a.notFoundPage},r.a.createElement("h1",null,"404"),r.a.createElement("div",null,r.a.createElement("h1",null,"not found"),r.a.createElement("div",null,"\u0442\u0435\u0441\u0442")))},oe=n(16),le=n.n(oe),ce=function(){var e=Object(a.useState)(!1),t=Object(A.a)(e,2),n=t[0],o=t[1];return r.a.createElement("div",{className:le.a.menu},n?r.a.createElement("button",{onClick:function(){o(!1)}},"menu"):r.a.createElement("div",{className:le.a.menuActive},r.a.createElement("button",{onClick:function(){o(!0)}},"menu"),r.a.createElement(L.b,{to:"/restore",className:le.a.link,activeClassName:le.a.activeLink},"Forgot password"),r.a.createElement(L.b,{to:"/register",className:le.a.link,activeClassName:le.a.activeLink},"Register"),r.a.createElement(L.b,{to:"/login",className:le.a.link,activeClassName:le.a.activeLink},"Login"),r.a.createElement(L.b,{to:"/profile",className:le.a.link,activeClassName:le.a.activeLink},"Profile")))},ie=function(e){var t=Object(c.c)((function(e){return e.restore})),n=Object(c.b)(),a=Object(z.useForm)(),o=a.control,l=a.handleSubmit;return r.a.createElement("div",{className:X.a.restorePage},r.a.createElement("div",null,r.a.createElement(W,{className:X.a.loginBlock})),r.a.createElement("div",{className:X.a.restoreBlock},t.error?r.a.createElement("h2",{className:X.a.errorMessage},t.error||"Error"):r.a.createElement("h1",null,"Please, set your new Password"),r.a.createElement("form",{onSubmit:l((function(e){var t;n((t=e,function(e){e(j(!0)),y.changePassword(t).then((function(t){200===t.status&&e(j(!1)),console.log(t)})).catch((function(t){e(j(!1)),e(R(t.response.data.error))}))}))}))},r.a.createElement(z.Controller,{as:r.a.createElement(J,{error:t.error,label:"password"}),name:"password",control:o,defaultValue:""}),r.a.createElement(z.Controller,{as:r.a.createElement(J,{error:t.error,label:"repeat password"}),name:"repeat_password",control:o,defaultValue:""}),r.a.createElement(D,{disable:t.responseLoading,title:"SEND"}))))},se=n(37),ue=n(61),me=n(31),de=n.n(me),Ee=function(e){var t=e.label,n=e.register,a=e.required,o=e.placeholder,l=e.type;return r.a.createElement("div",{className:q.a.inputBody},r.a.createElement("input",{name:t,ref:n({required:a}),placeholder:o,type:l}))},pe=se.a().shape({password:se.b().required().min(5),email:se.b().required().email()}),ge=r.a.memo((function(){var e,t,n=Object(c.b)(),a=Object(c.c)((function(e){return e.register})),o=Object(z.useForm)({resolver:Object(ue.yupResolver)(pe)}),l=o.register,i=o.handleSubmit,s=(o.watch,o.errors);return r.a.createElement(r.a.Fragment,null,a.email&&r.a.createElement(T.a,{to:"/login"}),r.a.createElement("div",{className:de.a.registerPage},r.a.createElement("div",{className:de.a.registerBox},r.a.createElement("h1",null,"REGISTER"),r.a.createElement("form",{onSubmit:i((function(e){n(function(e){return function(t){O(e).then((function(e){e.error||t(function(e){return{type:"SET-REGISTER-DATA",data:e}}(e.addedUser))}))}}(e)),console.log(e)}))},r.a.createElement("div",null,r.a.createElement(Ee,{register:l,label:"email",type:"text",placeholder:"email"}),null===(e=s.email)||void 0===e?void 0:e.message),r.a.createElement("div",{className:s?de.a.error:de.a.inputBody},r.a.createElement(Ee,{register:l,label:"password",type:"password",placeholder:"password"}),null===(t=s.password)||void 0===t?void 0:t.message),r.a.createElement(D,{title:"SEND"})))))})),_e=function(){return r.a.createElement(L.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(ce,null),r.a.createElement(T.d,null,r.a.createElement(T.b,{path:"/restore",render:function(){return r.a.createElement(Z,null)}}),r.a.createElement(T.b,{exact:!0,path:"/register",render:function(){return r.a.createElement(ge,null)}}),r.a.createElement(T.b,{exact:!0,path:["/login","/"],render:function(){return r.a.createElement($,null)}}),r.a.createElement(T.b,{exact:!0,path:"/profile",render:function(){return r.a.createElement(te,null)}}),r.a.createElement(T.b,{path:"/changePassword",render:function(){return r.a.createElement(ie,null)}}),r.a.createElement(T.b,{render:function(){return r.a.createElement(re,null)}}))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:C},r.a.createElement(_e,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[62,1,2]]]);
//# sourceMappingURL=main.58c7ab0f.chunk.js.map