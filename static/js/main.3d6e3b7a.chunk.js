(this["webpackJsonpneko-card-react-ts-project"]=this["webpackJsonpneko-card-react-ts-project"]||[]).push([[0],{100:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(35),l=t.n(o);t(68),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=t(4),c=t(30),i=t(2),u=t(22),m=t.n(u),d=m.a.create({withCredentials:!0,baseURL:"http://localhost:7542/2.0/"}),E=function(e){return d.post("auth/me",e).then((function(e){return e.data}))},g=function(){return function(e){E({}).then((function(a){(null===a||void 0===a?void 0:a.error)&&e({type:"PROFILE/SET-PROFILE-USER-DATA",data:a})}))}},p=t(3),f=t.n(p),v=t(15),_=m.a.create({withCredentials:!0,baseURL:"http://localhost:7542/2.0/"}),b=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _.post("auth/login",{email:e,password:a,rememberMe:t})},h=function(){return _.delete("auth/me")},w=function(){return _.post("auth/me")},O={isFetching:!1},R=function(e){return{type:"login/SET_FETCHING",isFetch:e}},N={_id:"",email:"",name:"",rememberMe:!1,error:"",verified:!1,publicCardPacksCount:0,isAdmin:!1,created:"",updated:"",authMe:!1},F=function(e){return{type:"login/SET_USER",user:e}},j=function(e){return{type:"login/SET_ERROR",error:e}},C=function(e){return{type:"login/SET_ERROR_IN",errorIn:e}},S=function(e){return{type:"login/AUTH_ME",authMe:e}},k=m.a.create({withCredentials:!0,baseURL:"http://localhost:7542/2.0/"}),y=function(e){return k.post("auth/register/",e)},P={data:{email:"",id:""},errorMessage:""},T=function(e){return{type:"REGISTER/SET-ERROR-MESSAGE-TYPE",message:e}},x=m.a.create({withCredentials:!0,baseURL:"http://localhost:7542/2.0/"}),M=function(e){var a=e.email;return x.post("auth/forgot",{email:a,message:"<div style=\"background-color: lime; padding: 15px\">\n                          password recovery link: \n                          <a href='http://localhost:3000/neko-card-react-ts-project#/changePassword/$token$'>link</a>\n                      </div> "})},B=function(e){var a=window.location.href.split("/")[5],t=e.repeat_password;return x.post("auth/set-new-password",{password:t,resetPasswordToken:a})},L={error:null,success:!1,disableButton:!1},I=function(e){return{type:"RESTORE/SET_ERROR",error:e}},A=function(e){return{type:"RESTORE/SET_SUCCESS_REQUEST",success:e}},U={},G=t(57),q=Object(c.c)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PROFILE/SET-PROFILE-USER-DATA":return Object(i.a)({},a.data);default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"login/SET_USER":return Object(i.a)(Object(i.a)({},e),a.user);case"login/SET_ERROR":return Object(i.a)(Object(i.a)({},e),{},{error:a.error});case"login/SET_ERROR_IN":return Object(i.a)(Object(i.a)({},e),{},{errorIn:a.errorIn});case"login/AUTH_ME":return Object(i.a)(Object(i.a)({},e),{},{authMe:a.authMe});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"REGISTER/SET-REGISTER-DATA":return Object(i.a)(Object(i.a)(Object(i.a)({},e),e.data),{},{data:a.data});case"REGISTER/SET-ERROR-MESSAGE-TYPE":return Object(i.a)(Object(i.a)({},e),{},{errorMessage:a.message});default:return e}},restore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"RESTORE/SET_ERROR":return Object(i.a)(Object(i.a)({},e),{},{error:a.error});case"RESTORE/SET_SUCCESS_REQUEST":return Object(i.a)(Object(i.a)({},e),{},{success:a.success});default:return e}},changePassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return e},isFetching:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"login/SET_FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:a.isFetch});default:return e}}}),V=Object(c.d)(q,Object(c.a)(G.a)),D=V;window.store=V;t(90);var Y=t(11),J=t(5),Q=t(19),H=t.n(Q),z=t(38),W=t.n(z),$=function(e){return r.a.createElement("div",{className:W.a.loginButtonBody},r.a.createElement("span",{className:W.a.link},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("button",{onClick:e.onClick,disabled:e.disable,className:W.a.button},e.title)))},K=t(42),X=t.n(K),Z=function(e){return r.a.createElement("div",{className:e.error?X.a.error:X.a.inputBody},r.a.createElement("input",{value:e.value,type:e.type,onChange:e.onChange,ref:e.register,name:e.name,disabled:e.disable}),e.value?"":r.a.createElement("label",null,e.label))},ee=t(58),ae=t.n(ee),te=function(e){return r.a.createElement("div",null,r.a.createElement("input",{checked:e.checked,onChange:e.onChange,className:ae.a.checkbox,type:"checkbox",name:e.name,ref:e.register,disabled:e.disable}))},ne=t(9),re=t(10),oe=t(24),le=r.a.memo((function(e){var a,t,o=re.a().shape({login:re.b().required().email(),password:re.b().required().min(7)}),l=Object(ne.useForm)({resolver:Object(oe.yupResolver)(o)}),c=l.register,i=l.control,u=l.handleSubmit,m=l.errors,d=l.reset,E=Object(s.b)(),g=Object(s.c)((function(e){return e.login.authMe})),p=Object(s.c)((function(e){return e.login.error})),_=Object(s.c)((function(e){return e.login.errorIn})),h=Object(n.useCallback)((function(e){var a,t,n;E((a=e.login,t=e.password,n=e.rememberMe,function(){var e=Object(v.a)(f.a.mark((function e(r){var o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(R(!0)),e.next=4,b(a,t,n);case 4:o=e.sent,r(S(!0)),r(F(o.data)),console.log("Response(login): ",o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response?(console.log("ERROR(login): ",e.t0.response.data.error),e.t0.response.data.password?r(C("password")):e.t0.response.data.email&&r(C("email")),r(j(e.t0.response.data.error))):console.log("ERROR: ",e.t0.message+", more details in the console");case 13:r(R(!1));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(a){return e.apply(this,arguments)}}())),d()}),[g]);return console.log(g),g?r.a.createElement(J.a,{to:"/profile"}):r.a.createElement("div",{className:e.className},r.a.createElement("form",{onSubmit:u(h)},r.a.createElement(ne.Controller,{as:r.a.createElement(Z,{onChange:function(){var e;return null===(null===(e=m.login)||void 0===e?void 0:e.message)},disable:e.isFetching,error:(null===(a=m.login)||void 0===a?void 0:a.message)||p,label:"login"}),name:"login",control:i,defaultValue:""}),r.a.createElement("div",{className:H.a.errorMessageColor},m.login&&r.a.createElement("span",null,m.login.message),"email"===_&&r.a.createElement("span",null,p)),r.a.createElement(ne.Controller,{as:r.a.createElement(Z,{onChange:function(){var e;return null===(null===(e=m.login)||void 0===e?void 0:e.message)},disable:e.isFetching,type:"password",error:(null===(t=m.password)||void 0===t?void 0:t.message)||p,label:"password"}),name:"password",control:i,defaultValue:""}),r.a.createElement("div",{className:H.a.errorMessageColor},m.password&&r.a.createElement("span",null,m.password.message),"password"===_&&r.a.createElement("span",null,p)),r.a.createElement(te,{name:"rememberMe",register:c,disable:e.isFetching}),r.a.createElement($,{title:"login",disable:e.isFetching})))})),se=function(e){return r.a.createElement("div",{className:H.a.loginPage},r.a.createElement("div",{className:H.a.loginFormContainer},r.a.createElement("h1",null," LOGIN "),r.a.createElement(le,{isFetching:e.isFetching,className:H.a.loginFormContainer}),r.a.createElement("div",{className:H.a.items},r.a.createElement(Y.b,{className:H.a.text1,to:"/restore"},"Forgot your password?"),r.a.createElement(Y.b,{className:H.a.text,to:"/register"},"Register"))))},ce=t(25),ie=t.n(ce),ue=re.a().shape({email:re.b().required().email()}),me=function(e){var a,t,n=Object(s.b)(),o=Object(s.c)((function(e){return e.restore})),l=Object(ne.useForm)({resolver:Object(oe.yupResolver)(ue)}),c=l.control,i=l.handleSubmit,u=l.errors;return r.a.createElement("div",{className:ie.a.restorePage},r.a.createElement("div",{className:ie.a.restoreBlock},r.a.createElement("h1",null,"Forgot you password?"),o.success?r.a.createElement("h2",null,"Link on email"):r.a.createElement("form",{onSubmit:i((function(e){n(function(e){return function(a){a(R(!0)),a(A(!1)),M(e).then((function(e){200===e.status&&(a(R(!0)),a(I(null)),a(A(!0)))})).catch((function(e){a(R(!1)),a(I(e.response.data.error))}))}}(e))}))},r.a.createElement(ne.Controller,{as:r.a.createElement(Z,{onChange:function(){var e;return null===(null===(e=u.email)||void 0===e?void 0:e.message)},error:(null===(a=u.email)||void 0===a?void 0:a.message)||o.error,label:"Enter your login"}),name:"email",control:c,defaultValue:""}),r.a.createElement("div",{className:ie.a.errorMessageColor},(null===(t=u.email)||void 0===t?void 0:t.message)||o.error),r.a.createElement($,{disable:e.isFetching,title:"SEND"}))))},de=t(8),Ee=t.n(de),ge=function(e){Object(s.c)((function(e){return e.profile}));var a=Object(s.b)();return Object(n.useEffect)((function(){a(g)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ee.a.profilePage},r.a.createElement("div",{className:Ee.a.profileContent},r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField}),r.a.createElement("div",{className:Ee.a.cardField})),r.a.createElement("div",{className:Ee.a.profileContainer},r.a.createElement("div",{className:Ee.a.titleProfile},"Profile "),r.a.createElement("div",null,"Ava"),r.a.createElement("div",null,"Ava"),r.a.createElement("div",null,"name"),r.a.createElement($,{disable:e.isFetching,title:"LogOut"}))))},pe=t(62),fe=t.n(pe),ve=function(e){return r.a.createElement("div",{className:fe.a.notFoundPage},r.a.createElement("h1",null,"404"),r.a.createElement("div",null,r.a.createElement("h1",null,"not found"),r.a.createElement("div",null,"\u0442\u0435\u0441\u0442")))},_e=t(20),be=t(16),he=t.n(be),we=r.a.memo((function(){var e=Object(n.useState)(!0),a=Object(_e.a)(e,2),t=a[0],o=a[1],l=Object(s.c)((function(e){return e.login.authMe})),c=Object(s.b)();Object(n.useEffect)((function(){c(function(){var e=Object(v.a)(f.a.mark((function e(a){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w();case 3:t=e.sent,a(S(!0)),a(F(t.data)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n=e.t0.response?e.t0.response.data.error:e.t0.message+", more details in the console",console.log("Authorization: ",n);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}())}),[]);var i=Object(n.useCallback)((function(){t&&o(!1),t||o(!0)}),[t]);return console.log("Menu render"),r.a.createElement("div",{className:he.a.menu},r.a.createElement("button",{onClick:i},"menu"),t&&r.a.createElement("div",{className:he.a.menuActive},r.a.createElement(Y.b,{to:"/restore",className:he.a.link,activeClassName:he.a.activeLink},"Forgot password"),r.a.createElement(Y.b,{to:"/register",className:he.a.link,activeClassName:he.a.activeLink},"Register"),l?r.a.createElement(Y.b,{onClick:function(){c(function(){var e=Object(v.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(S(!1)),e.prev=1,e.next=4,h();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),t=e.t0.response?e.t0.response.data.error:e.t0.message+", more details in the console",console.log("Log out error: ",t);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(a){return e.apply(this,arguments)}}())},to:"/login",className:he.a.link,activeClassName:he.a.activeLink},"Log out"):r.a.createElement(Y.b,{to:"/login",className:he.a.link,activeClassName:he.a.activeLink},"Login"),r.a.createElement(Y.b,{to:"/profile",className:he.a.link,activeClassName:he.a.activeLink},"Profile")))})),Oe=re.a().shape({password:re.b().required().min(7)}),Re=function(e){var a,t,n=Object(s.c)((function(e){return e.restore})),o=Object(s.b)(),l=Object(ne.useForm)({resolver:Object(oe.yupResolver)(Oe)}),c=l.control,i=l.handleSubmit,u=l.errors;return n.success?r.a.createElement(J.a,{to:"/login"}):r.a.createElement("div",{className:ie.a.restorePage},r.a.createElement("div",{className:ie.a.restoreBlock},r.a.createElement("h1",null,"Please, set your new Password"),r.a.createElement("form",{onSubmit:i((function(e){var a;e.password===e.repeat_password?o((a=e,function(e){e(R(!0)),e(A(!1)),B(a).then((function(a){200===a.status&&(e(R(!0)),I(null),e(A(!0)))})).catch((function(a){e(R(!1)),e(I(a.response.data.error))}))})):o(I("Password must be identical "))}))},r.a.createElement(ne.Controller,{as:r.a.createElement(Z,{error:n.error,type:"password",label:"password"}),name:"password",control:c,defaultValue:""}),r.a.createElement(ne.Controller,{as:r.a.createElement(Z,{error:(null===(a=u.password)||void 0===a?void 0:a.message)||n.error,type:"password",label:"repeat password"}),name:"repeat_password",control:c,defaultValue:""}),r.a.createElement("div",{className:ie.a.errorMessageColor},(null===(t=u.password)||void 0===t?void 0:t.message)||n.error),r.a.createElement($,{disable:e.isFetching,title:"SEND"}))))},Ne=t(45),Fe=t.n(Ne),je=function(e){return r.a.createElement("div",{className:Fe.a.cssload_container},r.a.createElement("div",{className:Fe.a.cssload_speeding_wheel}))},Ce=t(31),Se=t.n(Ce),ke=re.a().shape({password:re.b().required().min(7),email:re.b().required().email(),confirm_password:re.b().required().min(7)}),ye=r.a.memo((function(e){var a,t,n,o,l,c,i=Object(s.b)(),u=Object(s.c)((function(e){return e.register})),m=Object(ne.useForm)({resolver:Object(oe.yupResolver)(ke)}),d=m.handleSubmit,E=m.errors,g=m.reset,p=m.setError,f=m.control;m.clearErrors;return r.a.createElement(r.a.Fragment,null,u.data.email.length>0&&r.a.createElement(J.a,{to:"/login"}),r.a.createElement("div",{className:Se.a.registerPage,onBlur:function(){i(T(""))}},r.a.createElement("div",{className:Se.a.registerBox},r.a.createElement("h1",null,"REGISTER"),r.a.createElement("form",{onSubmit:d((function(e){if(e.confirm_password===e.password){var a={email:e.email,password:e.password};i(function(e){return function(a){a(R(!0)),y(e).then((function(e){e.data.error?a(T(e.data.error)):a(function(e){return{type:"REGISTER/SET-REGISTER-DATA",data:e}}(e.data.addedUser)),a(R(!1))})).catch((function(e){console.log(e.response.data.error),a(T(e.response.data.error)),a(R(!1))}))}}(a)),console.log(a),g()}else p("password",{message:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"}),p("confirm_password",{message:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"})}))},r.a.createElement(ne.Controller,{as:r.a.createElement(Z,{onChange:function(){var e;return null===(null===(e=E.email)||void 0===e?void 0:e.message)},error:(null===(a=E.email)||void 0===a?void 0:a.message)||u.errorMessage,type:"text",label:"Enter your login"}),name:"email",control:f,defaultValue:""}),r.a.createElement("div",{className:Se.a.errorMessageColor},(null===(t=E.email)||void 0===t?void 0:t.message)||u.errorMessage),r.a.createElement(ne.Controller,{as:r.a.createElement(Z,{error:null===(n=E.password)||void 0===n?void 0:n.message,type:"password",label:"password"}),name:"password",control:f,defaultValue:""}),r.a.createElement("div",{className:Se.a.errorMessageColor},null===(o=E.password)||void 0===o?void 0:o.message),r.a.createElement(ne.Controller,{as:r.a.createElement(Z,{onChange:function(){var e;return null===(null===(e=E.confirm_password)||void 0===e?void 0:e.message)},error:null===(l=E.confirm_password)||void 0===l?void 0:l.message,type:"password",label:"confirm password"}),name:"confirm_password",control:f,defaultValue:""}),r.a.createElement("div",{className:Se.a.errorMessageColor},null===(c=E.confirm_password)||void 0===c?void 0:c.message),r.a.createElement($,{title:"SEND",disable:e.isFetching})))))})),Pe=function(){var e=Object(s.c)((function(e){return e.isFetching.isFetching}));return r.a.createElement(Y.a,null,r.a.createElement("div",{className:"App"},e&&r.a.createElement(je,null),r.a.createElement(we,null),r.a.createElement(J.d,null,r.a.createElement(J.b,{path:"/restore",render:function(){return r.a.createElement(me,{isFetching:e})}}),r.a.createElement(J.b,{exact:!0,path:"/register",render:function(){return r.a.createElement(ye,{isFetching:e})}}),r.a.createElement(J.b,{exact:!0,path:["/login","/"],render:function(){return r.a.createElement(se,{isFetching:e})}}),r.a.createElement(J.b,{exact:!0,path:"/profile",render:function(){return r.a.createElement(ge,{isFetching:e})}}),r.a.createElement(J.b,{path:"/changePassword",render:function(){return r.a.createElement(Re,{isFetching:e})}}),r.a.createElement(J.b,{render:function(){return r.a.createElement(ve,null)}}))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{store:D},r.a.createElement(Pe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},16:function(e,a,t){e.exports={menu:"Menu_menu__2yOrF",menuActive:"Menu_menuActive__1fkJz",link:"Menu_link__wtBYG",activeLink:"Menu_activeLink__3jOIJ"}},19:function(e,a,t){e.exports={neon:"Login_neon__2oOc0",loginPage:"Login_loginPage__3QmJr",loginFormContainer:"Login_loginFormContainer__1OO4x",errorField:"Login_errorField__2fokP",items:"Login_items__xfe4x",text1:"Login_text1__2MhTi",text:"Login_text__3qblI"}},25:function(e,a,t){e.exports={neon:"Restore_neon__2xnCX",restorePage:"Restore_restorePage__Yt06I",restoreBlock:"Restore_restoreBlock__j8go8"}},31:function(e,a,t){e.exports={neon:"Register_neon__3snfG",registerPage:"Register_registerPage__22eL8",registerBox:"Register_registerBox__byB-h"}},38:function(e,a,t){e.exports={neon:"Button_neon__17sQT",button:"Button_button__2OrEq",loginButtonBody:"Button_loginButtonBody__3X43V",link:"Button_link__w9gha","btn-anim-1":"Button_btn-anim-1__2KaU3","btn-anim-2":"Button_btn-anim-2__29h2Y","btn-anim-3":"Button_btn-anim-3__2WLod","btn-anim-4":"Button_btn-anim-4__kwUi5"}},42:function(e,a,t){e.exports={neon:"Input_neon__2TJ1R",inputBody:"Input_inputBody__2u4Qd",error:"Input_error__hy98E",shake:"Input_shake__tmaUI"}},45:function(e,a,t){e.exports={neon:"Preloader_neon__3Tzof",cssload_container:"Preloader_cssload_container__c-n8B",cssload_speeding_wheel:"Preloader_cssload_speeding_wheel__1wLSN","cssload-spin":"Preloader_cssload-spin__2PCcK"}},58:function(e,a,t){e.exports={neon:"Checkbox_neon__1DTaF"}},62:function(e,a,t){e.exports={neon:"NotFound_neon__k5F0a",notFoundPage:"NotFound_notFoundPage__3y1lY"}},63:function(e,a,t){e.exports=t(100)},68:function(e,a,t){},8:function(e,a,t){e.exports={neon:"Profile_neon__2N-I0",profilePage:"Profile_profilePage__1-AUr",profileContainer:"Profile_profileContainer__1bZij",titleProfile:"Profile_titleProfile__3wYad",profileContent:"Profile_profileContent__19_nR",cardField:"Profile_cardField__2SM4_"}},90:function(e,a,t){}},[[63,1,2]]]);
//# sourceMappingURL=main.3d6e3b7a.chunk.js.map